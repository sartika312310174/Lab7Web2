# CodeIgniter 4 Framework

## What is CodeIgniter?

CodeIgniter is a PHP full-stack web framework that is light, fast, flexible and secure.
More information can be found at the [official site](https://codeigniter.com).

This repository holds the distributable version of the framework.
It has been built from the
[development repository](https://github.com/codeigniter4/CodeIgniter4).

More information about the plans for version 4 can be found in [CodeIgniter 4](https://forum.codeigniter.com/forumdisplay.php?fid=28) on the forums.
=======
# PRAKTIKUM 1 sampai 3 mata kuliah WEB 2
# PRAKTIKUM 4 sampai 6 mata kuliah WEB 2
# PRAKTIKUM 6 sampai 11 mata kuliah WEB2
# Link Demo: https://youtu.be/VY2jk0APV9A
```
Nama: Sartika Agustin
Nim: 312310174
Kelas: TI.23.A2
Matkul: Pemrograman Web 2
Dosen Pengampu: Agung Nugroho, S.Kom., M.Kom.
```
Lengkapi kode program untuk menu lainnya yang ada pada Controller Page, sehingga semua
link pada navigasi header dapat menampilkan tampilan dengan layout yang sama.
# 1. Hidupkan apache dan lakukan konfigurasi di file php.ini
![image](https://github.com/user-attachments/assets/260e3093-1aa5-4cbd-9bd0-da2669acae59)
![image](https://github.com/user-attachments/assets/1ecfb3a9-c8e6-4f3b-b62a-96c416ea2244)
# 2. Install codeigniter, link: https://codeigniter.com/download
![image](https://github.com/user-attachments/assets/f429fae6-4ed2-4b3d-a817-58d9a5bfbbe9)
# 3. Menjalankan CLI
![image](https://github.com/user-attachments/assets/3e4c36ce-2320-4e80-944d-5f454bc38d6e)
# 4. Mengaktifkan mode debugging tampilan error akan seperti ini.
![image](https://github.com/user-attachments/assets/c288c6da-b59a-4b82-be82-806239e11bb8)
![image](https://github.com/user-attachments/assets/3258cf02-e845-4618-aad6-409c3abfef54)
# 5. Routing dan Controller
![image](https://github.com/user-attachments/assets/0bc411f5-36b5-453e-9321-6f1a16a70f9d)
![image](https://github.com/user-attachments/assets/594e5973-21f7-4ed6-832a-c1a3de28f5ef)
![image](https://github.com/user-attachments/assets/a662e4e6-86b1-4f40-977f-db00871a3459)
```
Ketika diakses akan mucul tampilan error 404 file not found, itu artinya file/page tersebut tidak
ada. Untuk dapat mengakses halaman tersebut, harus dibuat terlebih dahulu Contoller yang
sesuai dengan routing yang dibuat yaitu Contoller Page.
```
# 6. Membuat Controller
![image](https://github.com/user-attachments/assets/af186b53-cc21-403a-9be3-0c52f52455eb)
![image](https://github.com/user-attachments/assets/857b8a33-4ffd-407d-8752-ca34ef7a8863)
# 7. Auto Routing
![image](https://github.com/user-attachments/assets/9ae3e001-6fe2-4174-9217-c38111e3b2c1)
# 8. Tambah method baru
![image](https://github.com/user-attachments/assets/09a0ca42-4364-4b78-a1b0-2802e8411247)
![image](https://github.com/user-attachments/assets/54277adb-ddc9-4685-805f-ba03fbdb4efc)
# 9. Membuat View
![image](https://github.com/user-attachments/assets/656cb1c3-3119-46e4-8fc1-d6cd35b6b9db)
# 10. Ubah Method
![image](https://github.com/user-attachments/assets/b5982f36-fefe-409d-a22f-0cbb97c89c45)
# 11. Membuat layout dengan css
![image](https://github.com/user-attachments/assets/6a1881c3-f00c-4261-9df0-9ed1f70a5535)
# 12. Footer
![image](https://github.com/user-attachments/assets/ff9d07a4-48d2-41de-921a-5a01a5bcfeee)
# 13. Ubah file about.php
![image](https://github.com/user-attachments/assets/e65301b5-8847-4073-8a3e-062ce5d97c00)
# 14. Hasil
![image](https://github.com/user-attachments/assets/08fa899d-f15e-4508-989f-695f1e87d1bb)


# PRAKTIKUM 2
# 1. Membuat database
![image](https://github.com/user-attachments/assets/ed1ac92e-3bc2-412b-8b63-556a385573d1)
# 2. Membuat table
![image](https://github.com/user-attachments/assets/163c52d7-a9ba-49b7-ab1e-83f5172ef2af)
# 3. Konfigurasi koneksi database
![image](https://github.com/user-attachments/assets/cd04cc3a-8796-466f-8f0d-436a784f5b7d)
# 4. Membuat Model
![image](https://github.com/user-attachments/assets/4a4425d5-bb11-484b-bf66-4e5baf05fc4f)
# 5. Membuat Controller
![image](https://github.com/user-attachments/assets/3e52d1e8-2360-4ad5-b91f-c3da0864343e)
# 6. Membuat View
![image](https://github.com/user-attachments/assets/73109d6e-81e5-40e0-a4db-c75d916e4c93)
# 7. hasil dengan mengakses http://localhost:8080/artikel
![image](https://github.com/user-attachments/assets/76cca3d3-bdad-460b-8723-90834aae2249)
# 8. Isi tabel pada database 
![image](https://github.com/user-attachments/assets/8d71fd50-ba70-4102-a48b-e1101464ea37)
# 9.Hasilnya 
![image](https://github.com/user-attachments/assets/8f0002ab-278b-4f2c-8e08-8eec7584765c)
# 10. Membuat tampilan detail, tambahkan fungsi baru
![image](https://github.com/user-attachments/assets/e0e95f58-da4f-4406-bdd5-b92e3cdd425b)
# 11. Menambah detail dengan membuat file baru, file detail.php
![image](https://github.com/user-attachments/assets/3b2d0dec-1d58-4812-8ba5-2071078b81cc)
# 12. Membuat Routing baru
![image](https://github.com/user-attachments/assets/9b5a6af6-b718-4316-9e29-d58c44d5c2c1)
# 13. Hasil
![image](https://github.com/user-attachments/assets/a86ebf85-e771-4830-9bf1-5e4a09b805e3)
# 14. Membuat menu admin
![image](https://github.com/user-attachments/assets/8b5fe45e-33d3-41ba-a2ef-6f6dcde5407f)
Menu admin adalah untuk proses CRUD data artikel. Buat method baru pada Controller
Artikel dengan nama admin_index()
![image](https://github.com/user-attachments/assets/439a2bc4-7c10-4829-ba93-66fa6e13d69d)
# 15. Tambahkan routing untuk menu admin
![image](https://github.com/user-attachments/assets/2d525b81-8ac1-4c31-b3b3-ce9ad61ccd50)
# 16. Hasil
![image](https://github.com/user-attachments/assets/0ae817e3-29a2-4449-8866-c1eafea333be)
# 17. Menambah data artikel
![image](https://github.com/user-attachments/assets/bcbf4f76-dbec-4217-9da4-02c68c4f60de)
# 18. Menambah form_data.php
![image](https://github.com/user-attachments/assets/9d7e9fa2-c97f-494e-a508-d232bde1413d)
# 19. Hasil, http://localhost:8080/admin/artikel/add
![image](https://github.com/user-attachments/assets/f25cec02-07ed-4209-9bc5-2e8c39b4e53e)
# 20. Mengubah Data
Tambahkan fungsi/method baru pada Controller Artikel dengan nama edit()
![image](https://github.com/user-attachments/assets/79b2fe10-7d08-4bda-9ecc-17670a89f134)
# 21. Kemudian buat view untuk form tambah dengan nama form_edit.php
![image](https://github.com/user-attachments/assets/1f84e082-e1af-4923-9523-6438cce97b18)
# 22. hasil
![image](https://github.com/user-attachments/assets/f2e178b5-72cf-4226-bab4-c1d50582d43c)

# PRAKTIKUM 3
# 1. Membuat Layout Utama 
```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><?= $title ?? 'My Website' ?></title>
    <link rel="stylesheet" href="<?= base_url('/style.css');?>">
</head>
<body>
    <div id="container">
        <header>
            <h1>Layout Sederhana</h1>
        </header>
        <nav>
            <a href="<?= base_url('/');?>" class="active">Home</a>
            <a href="<?= base_url('/artikel');?>">Artikel</a>
            <a href="<?= base_url('/about');?>">About</a>
            <a href="<?= base_url('/contact');?>">Kontak</a>
        </nav>
        <section id="wrapper">
            <section id="main"> 
                <?= $this->renderSection('content') ?>
        </section>
        <aside id="sidebar">
            <?= view_cell('App\\Cells\\ArtikelTerkini::render') ?>
            <div class="widget-box">
                <h3 class="title">Widget Header</h3>
                <ul>
                <li><a href="#">Widget Link</a></li>
                <li><a href="#">Widget Link</a></li>
                </ul>
            </div>
            <div class="widget-box">
            <h3 class="title">Widget Text</h3>
            <p>Vestibulum lorem elit, iaculis in nisl volutpat,
        malesuada tincidunt arcu. Proin in leo fringilla,
        vestibulum mi porta,
        faucibus felis. Integer pharetra est nunc, nec pretium
        nunc pretium ac.</p>
            </div>
        </aside>
    </section>
    <footer>
        <p>&copy; 2021 - Universitas Pelita Bangsa</p>
    </footer>
    </div>
</body>
</html>
```
# 2. Ubah app/Views/home.php agar sesuai dengan layout baru:
```
<?= $this->extend('layout/main') ?>

<?= $this->section('content') ?>

<h1><?= $title; ?></h1>
<hr>
<p><?= $content; ?></p>

<?= $this->endSection() ?>
```
# 3. Membuat Class View Cell
```
<?php

namespace App\Cells;

use CodeIgniter\View\Cells\Cell;
use App\Models\ArtikelModel;

class ArtikelTerkini extends Cell
{
    public function render(): string
    {
        $model = new ArtikelModel();
        $artikel = $model->orderBy('id', 'DESC')->limit(5)->findAll();
        
        return view('components/artikel_terkini', ['artikel' => $artikel]);
    }
}
```
# 4 Membuat View untuk View Cell
```
<h3>Artikel Terkini</h3>
<ul>
    <?php foreach ($artikel as $row): ?>
        <li><a href="<?= base_url('/artikel/' . $row['slug']) ?>"><?=
$row['judul'] ?></a></li>
    <?php endforeach; ?>
</ul>
```
# 5 Mengaksesnya dengan localhost:8080/
![image](https://github.com/user-attachments/assets/3277ac1a-f756-4eb7-acbd-8dd31038c862)

# PRAKTIKUM 4
# 1. Membuat tabel User di database lab_ci4
![image](https://github.com/user-attachments/assets/83cb8384-e33d-4122-95a3-d7ace271ef4f)
# 2. Membuat model user di direktori app/Models dengan nama file UserModel.php
```
<?php 
 
namespace App\Models; 
 
use CodeIgniter\Model; 
 
class UserModel extends Model 
{ 
    protected $table = 'user'; 
    protected $primaryKey = 'id';
    protected $useAutoIncrement = true; 
    protected $allowedFields = ['username', 'useremail', 'userpassword']; 
}
```
# 3. Membuat Controler User: membuat file User.php di direktori app/Controller. Tambahkan method login() $ index ().
```
<?php 
 
namespace App\Controllers; 
 
use App\Models\UserModel; 
 
class User extends BaseController 
{ 
    public function index()  
    { 
        $title = 'Daftar User'; 
        $model = new UserModel(); 
        $users = $model->findAll(); 
        return view('user/index', compact('users', 'title')); 
    } 
 
    public function login() 
    { 
        helper(['form']); 
        $email = $this->request->getPost('email'); 
        $password = $this->request->getPost('password'); 
        if (!$email) 
        { 
            return view('user/login'); 
        } 
 
        $session = session(); 
        $model = new UserModel(); 
        $login = $model->where('useremail', $email)->first(); 
        if ($login) 
        { 
            $pass = $login['userpassword']; 
            if (password_verify($password, $pass)) 
            { 
                $login_data = [ 
                    'user_id' => $login['id'], 
                    'user_name' => $login['username'], 
                    'user_email' => $login['useremail'], 
                    'logged_in' => TRUE, 
                ];
                $session->set($login_data); 
                return redirect('admin/artikel'); 
            } 
            else  
            { 
                $session->setFlashdata("flash_msg", "Password salah."); 
                return redirect()->to('/user/login'); 
            } 
        } 
        else 
        { 
            $session->setFlashdata("flash_msg", "email tidak terdaftar."); 
            return redirect()->to('/user/login'); 
        } 
    } 

    public function logout()  {
        
    session()->destroy(); 
    return redirect()->to('/user/login'); 
}
}
```
# 4. Membuat view login: buat direktori baru "user" di direktori app/Views, buat file baru login.php
```
<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <title>Login</title> 
     <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            background: white;
            padding: 30px 40px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            width: 350px;
        }
        h2 {
            margin-bottom: 20px;
        }
        input[type="email"],
        input[type="password"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0 20px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        button {
            background: #1f5faa;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        button:hover {
            background: #333;
        }
    </style>
</head> 
<body> 
    <div id="login-wrapper"> 
            <h1>Sign In</h1> 
            <?php if(session()->getFlashdata('flash_msg')):?> 
                <div class="alert alert-danger"><?= session() ->getFlashdata('flash_msg') ?></div> 
            <?php endif;?> 
            <form action="" method="post"> 
                <div class="mb-3"> 
                    <label for="InputForEmail" class="form-label">Email address</label> 
                    <input type="email" name="email" class="form-control" id="InputForEmail" value="<?= set_value('email') ?>"> 
                </div> 
                <div class="mb-3"> 
                    <label for="InputForPassword" class="form-label">Password</label> 
                    <input type="password" name="password" class="form-control" id="InputForPassword"> 
                </div> 
                <button type="submit" class="btn btn-primary">Login</button> 
            </form> 
    </div> 
</body> 
</html> 
```
# 5. Membuat database Seeder di CLI
![image](https://github.com/user-attachments/assets/2ca79d56-a1af-47b5-97b5-d71417eee7a0)
# 6.  buka file UserSeeder.php yang berada di lokasi direktori /app/Database/Seeds/UserSeeder.php kemudian isi dengan kode berikut: 
```
<?php

namespace App\Database\Seeds;

use CodeIgniter\Database\Seeder;

class UserSeeder extends Seeder
{
    public function run()
    { 
        $model = model('UserModel'); 
        $model->insert([ 
            'username' => 'admin', 
            'useremail' => 'admin@email.com', 
            'userpassword' => password_hash('admin123', PASSWORD_DEFAULT), 
        ]); 
    } 
}
```
#  buka kembali CLI dan ketik perintah berikut:
![image](https://github.com/user-attachments/assets/d0ac134a-4b37-4e71-8f28-4be8063db3ae)
# hidupkan codeigniter dengan:
![image](https://github.com/user-attachments/assets/b9eadf41-b1bd-4ae6-bd96-063d9ea14a39)

# UJI COBA LOGIN: buka url ini http://localhost:8080/user/login
![image](https://github.com/user-attachments/assets/255efb26-32b1-4a52-aa09-f94787fa76fd)

# 7. Menambahkan Auth Filter: buat filter untuk halaman admin. Buat file baru dengan nama Auth.php pada direktori app/Filters.  
```
<?php namespace App\Filters; 
  
use CodeIgniter\HTTP\RequestInterface; 
use CodeIgniter\HTTP\ResponseInterface; 
use CodeIgniter\Filters\FilterInterface; 
  
class Auth implements FilterInterface 
{ 
    public function before(RequestInterface $request, $arguments = null) 
    { 
        // jika user belum login 
        if(! session()->get('logged_in')){ 
            // maka redirct ke halaman login 
            return redirect()->to('/user/login'); 
        } 
    } 
  
    public function after(RequestInterface $request, ResponseInterface 
$response, $arguments = null) 
    { 
        // Do something here 
    } 
}
```
#  buka file app/Config/Filters.php tambahkan kode berikut: 
```
public array $aliases = [
        //kode lain, tambahkan kode di bawah//
        'auth'          => \App\Filters\Auth::class, 

    ];
```
# buka file app/Config/Routes.php dan sesuaikan kodenya. 
```
$routes->group('admin', ['filter' => 'auth'], function($routes) {
    $routes->get('artikel', 'Artikel::admin_index');
    $routes->add('artikel/add', 'Artikel::add');
```
# Percobaan Akses Menu Admin: Buka url dengan alamat http://localhost:8080/admin/artikel ketika alamat tersebut diakses maka, akan dimuculkan halaman login. 
![image](https://github.com/user-attachments/assets/809955fa-f9e7-4807-a906-e5e16a983086)

# Tambahkan fungsi logout
```
public function logout()  {
    session()->destroy(); 
    return redirect()->to('/user/login'); 
}
```
# PRAKTIKUM 5 
# 1. Membuat pagination, buka Controller Artikel, kemudian modifikasi kode pada method admin_index seperti berikut. 
```
public function admin_index()  
{ 
$title = 'Daftar Artikel'; 
$model = new ArtikelModel(); 
$data = [ 
'title'   => $title, 
'artikel' => $model->paginate(10), #data dibatasi 10 record per halaman 
'pager'   => $model->pager, 
]; 
return view('artikel/admin_index', $data); 
}
```
# 2. Kemudian buka file views/artikel/admin_index.php dan tambahkan kode berikut dibawah deklarasi tabel data. 
```
<?= $pager->links(); ?>
```
#  3. Lalu buka di browser dengan: http://localhost:8080/index.php/admin/artikel
![image](https://github.com/user-attachments/assets/2f7d65be-8fbb-4259-9453-3da87f92b33a)

# 4. Membuat pencarian: buka kembali Controller Artikel, pada method admin_index ubah kodenya seperti berikut
```![image](https://github.com/user-attachments/assets/64e2ad62-2b86-40aa-bb82-c9ede0962a50)

public function admin_index()  
{ 
$title = 'Daftar Artikel'; 
$q = $this->request->getVar('q') ?? ''; 
$model = new ArtikelModel(); 
$data = [ 
    'title'   => $title, 
    'q'       => $q, 
    'artikel' => $model->like('judul', $q)->paginate(10), # data dibatasi 10 record per halaman 
    'pager'   => $model->pager, 
]; 
return view('artikel/admin_index', $data); 
}
```
# 5. Kemudian buka kembali file views/artikel/admin_index.php dan tambahkan form pencarian sebelum deklarasi tabel seperti berikut:
```
<form method="get" class="form-search"> 
    <input type="text" name="q" value="<?= $q; ?>" placeholder="Cari data"> 
    <input type="submit" value="Cari" class="btn btn-primary"> 
</form>
```
# Dan pada link pager ubah seperti berikut.
```
<?= $pager->only(['q'])->links(); ?>
```
#  ujicoba dengan membuka kembali halaman admin artikel, masukkan kata kunci tertentu pada form pencarian.
![image](https://github.com/user-attachments/assets/37252db6-61e0-4870-b1cf-689935b1fd70)

# PRAKTIKUM 6
# Membuat kolom untuk mengupload gambar pada artikel
# Buka Controller Artikel pada project sebelumnya, sesuaikan kode pada method add seperti berikut:
```
 public function add()  
    { 
        // validasi data. 
        $validation =  \Config\Services::validation(); 
        $validation->setRules(['judul' => 'required']); 
        $isDataValid = $validation->withRequest($this->request)->run(); 
 
        if ($isDataValid) 
        { 
            $file = $this->request->getFile('gambar'); 
            $file->move(ROOTPATH . 'public/gambar'); 
 
            $artikel = new ArtikelModel(); 
            $artikel->insert([ 
                'judul'  => $this->request->getPost('judul'), 
                'isi'    => $this->request->getPost('isi'), 
                'slug'   => url_title($this->request->getPost('judul')), 
                'gambar' => $file->getName(), 
            ]); 
            return redirect('admin/artikel'); 
        } 
        $title = "Tambah Artikel"; 
        return view('artikel/form_add', compact('title')); 
    }
```
# Kemudian pada file views/artikel/form_add.php tambahkan field input file seperti berikut. 
```
 <p> 
        <input type="file" name="gambar"> </p>
```
# sesuaikan tag form dengan menambahkan ecrypt type seperti berikut. 
```
<form action="" method="post" enctype="multipart/form-data">
```
# Melakukan ujicoba dengan mengakses menu tambah artikel
![image](https://github.com/user-attachments/assets/f54ad00a-e834-41ce-993d-f6ae7043f565)
![image](https://github.com/user-attachments/assets/07edae33-0ea5-4190-950a-51e1f5b0ba12)

# PRAKTIKUM 7
# 1. Membuat table Kategori
![image](https://github.com/user-attachments/assets/eec9aa30-eb56-4993-baeb-7e3d2d777562)
# 2. Mengubah table artikel
![image](https://github.com/user-attachments/assets/4c14f7dd-2267-4694-8f70-e096fb4cf4bc)
# 3. Membuat model kategori
```
<?php 
 
namespace App\Models; 
 
use CodeIgniter\Model; 
 
class KategoriModel extends Model 
{ 
    protected $table = 'kategori'; 
    protected $primaryKey = 'id_kategori'; 
    protected $useAutoIncrement = true; 
    protected $allowedFields = ['nama_kategori', 'slug_kategori']; 
}
```
# 4. Memodifikasi model kategori
```
<?php 
 
namespace App\Models; 
 
use CodeIgniter\Model; 
 
class ArtikelModel extends Model 
{ 
   protected $table = 'artikel'; 
   protected $primaryKey = 'id'; 
   protected $useAutoIncrement = true; 
   protected $allowedFields = ['judul', 'isi', 'status', 'slug', 'gambar', 
'id_kategori']; 
 
   public function getArtikelDenganKategori() 
   { 
      return $this->db->table('artikel') 
                  ->select('artikel.*, kategori.nama_kategori') 
                  ->join('kategori', 'kategori.id_kategori = artikel.id_kategori')
                  ->get() 
                  ->getResultArray(); 
   } 
}
```
# 5. Memodifikasi Controller Artikel 
```
<?php 
     
namespace App\Controllers; 
 
use App\Models\ArtikelModel; 
use App\Models\KategoriModel; 
 
class Artikel extends BaseController 
{ 
    public function index() 
    { 
        $title = 'Daftar Artikel'; 
        $model = new ArtikelModel(); 
        $artikel = $model->getArtikelDenganKategori(); // Use the new method 
 
        return view('artikel/index', compact('artikel', 'title')); 
    } 
 
 public function admin_index() 
{ 
    $title = 'Daftar Artikel (Admin)'; 
    $model = new ArtikelModel(); 

    $q = $this->request->getVar('q') ?? ''; 
    $kategori_id = $this->request->getVar('kategori_id') ?? ''; 

    $artikel = $model->getArtikelDenganKategori($q, $kategori_id); 

    $kategoriModel = new \App\Models\KategoriModel(); 
    $kategori = $kategoriModel->findAll(); 

    return view('artikel/admin_index', [
        'title' => $title,
        'artikel' => $artikel,
        'pager' => $model->pager,
        'kategori' => $kategori,
        'q' => $q,
        'kategori_id' => $kategori_id
    ]); 
}

 
    // ... (methods add, edit, delete remain largely the same, but update to handle id_kategori) 
 
    public function add() 
    { 
        // Validation... 
        if ($this->request->getMethod() == 'post' && $this->validate([ 
                'judul' => 'required', 
            'id_kategori' => 'required|integer' // Ensure id_kategori is required and an integer 
        ])) { 
            $model = new ArtikelModel(); 
            $model->insert([ 
                'judul' => $this->request->getPost('judul'), 
                'isi' => $this->request->getPost('isi'), 
                'slug' => url_title($this->request->getPost('judul')), 
                'id_kategori' => $this->request->getPost('id_kategori') 
            ]); 
            return redirect()->to('/admin/artikel'); 
        } else { 
            $kategoriModel = new KategoriModel(); 
            $data['kategori'] = $kategoriModel->findAll(); // Fetch categories for the form 
            $data['title'] = "Tambah Artikel";
             return view('artikel/form_add', $data); 
        } 
    } 
 
    public function edit($id) 
    { 
        $model = new ArtikelModel(); 
        if ($this->request->getMethod() == 'post' && $this->validate([ 
            'judul' => 'required', 
            'id_kategori' => 'required|integer' 
        ])) { 
            $model->update($id, [ 
                'judul' => $this->request->getPost('judul'), 
                'isi' => $this->request->getPost('isi'), 
                'id_kategori' => $this->request->getPost('id_kategori') 
            ]); 
            return redirect()->to('/admin/artikel'); 
        } else { 
            $data['artikel'] = $model->find($id); 
            $kategoriModel = new KategoriModel(); 
            $data['kategori'] = $kategoriModel->findAll(); // Fetch categories for the form 
            $data['title'] = "Edit Artikel"; 
            return view('artikel/form_edit', $data); 
        } 
    } 
 
    public function delete($id) 
    { 
        $model = new ArtikelModel(); 
        $model->delete($id); 
        return redirect()->to('/admin/artikel'); 
    } 
 
    public function view($slug) 
    { 
        $model = new ArtikelModel(); 
        $data['artikel'] = $model->where('slug', $slug)->first(); 
        if (empty($data['artikel'])) { 
            throw new \CodeIgniter\Exceptions\PageNotFoundException('Cannot find the article.'); 
        } 
        $data['title'] = $data['artikel']['judul']; 
        return view('artikel/detail', $data); 
    } 
} 
```
# 6 Memodifikasi view
```
<?= $this->include('template/header'); ?> 
     
<?php if ($artikel): foreach ($artikel as $row): ?> 
    <article class="entry"> 
        <h2><a href="<?= base_url('/artikel/' . $row['slug']); ?>"><?= 
$row['judul']; ?></a></h2> 
        <p>Kategori: <?= $row['nama_kategori'] ?></p> 
        <img src="<?= base_url('/gambar/' . $row['gambar']); ?>" alt="<?= 
$row['judul']; ?>"> 
        <p><?= substr($row['isi'], 0, 200); ?></p> 
    </article> 
    <hr class="divider" /> 
<?php endforeach; else: ?> 
    <article class="entry"> 
        <h2>Belum ada data.</h2> 
    </article> 
<?php endif; ?> 
 
<?= $this->include('template/footer'); ?>
```
# 7 memodifikasi admin_index.php
```
<?= $this->include('template/admin_header'); ?> 
 
<h2><?= $title; ?></h2> 
 
<div class="row mb-3"> 
    <div class="col-md-6"> 
        <form method="get" class="form-inline"> 
            <input type="text" name="q" value="<?= $q; ?>" placeholder="Cari 
judul artikel" class="form-control mr-2"> 
            <select name="kategori_id" class="form-control mr-2"> 
                <option value="">Semua Kategori</option> 
                <?php foreach ($kategori as $k): ?> 
                    <option value="<?= $k['id_kategori']; ?>" <?= ($kategori_id 
== $k['id_kategori']) ? 'selected' : ''; ?>><?= $k['nama_kategori']; 
?></option> 
                <?php endforeach; ?> 
            </select> 
            <input type="submit" value="Cari" class="btn btn-primary"> 
        </form> 
    </div> 
</div> 
 
<table class="table"> 
    <thead>
 <tr> 
            <th>ID</th> 
            <th>Judul</th> 
            <th>Kategori</th> 
            <th>Status</th> 
            <th>Aksi</th> 
        </tr> 
    </thead> 
    <tbody> 
        <?php if (count($artikel) > 0): ?> 
            <?php foreach ($artikel as $row): ?> 
                <tr> 
                    <td><?= $row->id; ?></td> 
                    <td> 
                        <b><?= $row->judul; ?></b> 
                        <p><small><?= substr($row->isi, 0, 50); ?></small></p> 
                    </td> 
                    <td><?= $row->nama_kategori; ?></td> 
                    <td><?= $row->status; ?></td> 
                    <td> 
                        <a class="btn btn-sm btn-info" href="<?= 
base_url('/admin/artikel/edit/' . $row->id); ?>">Ubah</a> 
                        <a class="btn btn-sm btn-danger" onclick="return 
confirm('Yakin menghapus data?');" href="<?= 
base_url('/admin/artikel/delete/' . $row->id); ?>">Hapus</a> 
                    </td> 
                </tr> 
            <?php endforeach; ?> 
        <?php else: ?> 
            <tr> 
                <td colspan="5">Tidak ada data.</td> 
            </tr> 
        <?php endif; ?> 
    </tbody> 
</table> 
 
<?= $pager->only(['q', 'kategori_id'])->links(); ?> 
 
<?= $this->include('template/admin_footer'); ?>
```
# 8 memodifikasi form_add.php
```
<?= $this->include('template/admin_header'); ?> 
     
<h2><?= $title; ?></h2> 
 
<form action="" method="post"> 
    <p> 
        <label for="judul">Judul</label>
 <input type="text" name="judul" id="judul" required> 
    </p> 
    <p> 
        <label for="isi">Isi</label> 
        <textarea name="isi" id="isi" cols="50" rows="10"></textarea> 
    </p> 
    <p> 
        <label for="id_kategori">Kategori</label> 
        <select name="id_kategori" id="id_kategori" required> 
            <?php foreach($kategori as $k): ?> 
                <option value="<?= $k['id_kategori']; ?>"><?= 
$k['nama_kategori']; ?></option> 
            <?php endforeach; ?> 
        </select> 
    </p> 
    <p><input type="submit" value="Kirim" class="btn btn-large"></p> 
</form> 
 
<?= $this->include('template/admin_footer'); ?>
```
# 9 memodifikasi form_edit.php
```
<?= $this->include('template/admin_header'); ?> 
 
<h2><?= $title; ?></h2> 
 
<form action="" method="post"> 
    <p> 
        <label for="judul">Judul</label> 
        <input type="text" name="judul" value="<?= $artikel['judul']; ?>" 
id="judul" required> 
    </p> 
    <p> 
        <label for="isi">Isi</label> 
        <textarea name="isi" id="isi" cols="50" rows="10"><?= $artikel['isi']; 
?></textarea> 
    </p> 
    <p> 
        <label for="id_kategori">Kategori</label> 
        <select name="id_kategori" id="id_kategori" required> 
            <?php foreach($kategori as $k): ?> 
                <option value="<?= $k['id_kategori']; ?>" <?= 
($artikel['id_kategori'] == $k['id_kategori']) ? 'selected' : ''; ?>><?= 
$k['nama_kategori']; ?></option> 
            <?php endforeach; ?> 
        </select> 
    </p> 
    <p><input type="submit" value="Kirim" class="btn btn-large"></p> 
</form> 
<?= $this->include('template/admin_footer'); ?>
```
# Hasil
![image](https://github.com/user-attachments/assets/9885775c-1d1e-44b2-a5c0-4f3d5a418a4b)

# 10 Testing
```
Lakukan uji coba untuk memastikan semua fungsi berjalan dengan baik: 
• Menampilkan daftar artikel dengan nama kategori. 
• Menambah artikel baru dengan memilih kategori. 
• Mengedit artikel dan mengubah kategorinya. 
• Menghapus artikel.
```
# 1. • Menampilkan daftar artikel dengan nama kategori. 
![image](https://github.com/user-attachments/assets/4a165a4b-8f65-4c35-b0fc-5b540d36f5f9)
# 2. Menambah artikel baru dengan memilih kategori. 
![image](https://github.com/user-attachments/assets/74eea483-091a-4734-a27d-8f1cac3d5759)
![image](https://github.com/user-attachments/assets/4afb9457-bab4-4217-88e3-45f96009afda)
# 3. • Mengedit artikel dan mengubah kategorinya. 
![image](https://github.com/user-attachments/assets/68164dbd-fa12-474b-9eb5-6acebebec510)
![image](https://github.com/user-attachments/assets/6d7a8bf6-6201-4d3c-a908-72d93af6ea25)
# 4. • Menghapus artikel.
![image](https://github.com/user-attachments/assets/f9d4dfc3-9532-48e0-a412-f23af067f2a3)

# PRAKTIKUM 8
# 1. copy file Ajax pada folder assets yang baru dibuat di dalam folder publik
```
https://code.jquery.com/jquery-3.6.0.js
```
# 2. Membuat ajax controller, buat file AjaxController.php dalam app/Controllers/AjaxController.php
```
<?php

namespace App\Controllers;

use CodeIgniter\Controller;
use App\Models\ArtikelModel;

class AjaxController extends Controller
{

    public function index()
   {
       $title = 'Daftar Artikel (AJAX)';
       return view('ajax/index', compact('title'));
   }


    public function getData()
    {
        $model = new ArtikelModel();
        $data = $model->select('artikel.*, kategori.nama_kategori')
                      ->join('kategori', 'kategori.id_kategori = artikel.id_kategori', 'left')
                      ->findAll();

        return $this->response->setJSON($data);
    }

    public function delete($id)
    {
        $model = new ArtikelModel();
        $model->delete($id);

        return $this->response->setJSON(['status' => 'OK']);
    }
}
```
# 3. Buat View dalam app/Views/ajax/index.php
```
<?= $this->include('template/admin_header'); ?>

<h2 class="sub-judul">Daftar Artikel (AJAX)</h2>
<hr>

<table class="table" id="artikelTable">
    <thead>
        <tr>
            <th>ID</th>
            <th>Judul</th>
            <th>Kategori</th>
            <th>Aksi</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script src="<?= base_url('assets/js/jquery-3.6.0.min.js') ?>"></script>
<script>
    $(document).ready(function () {
        function loadData() {
            $('#artikelTable tbody').html('<tr><td colspan="4">Loading...</td></tr>');
            $.ajax({
                url: "<?= base_url('ajax/getData') ?>",
                method: "GET",
                dataType: "json",
                success: function (data) {
                    let html = '';
                    data.forEach(function (row) {
                        html += '<tr>';
                        html += '<td>' + row.id + '</td>';
                        html += '<td>' + row.judul + '</td>';
                        html += '<td>' + (row.nama_kategori || '-') + '</td>';
                        html += '<td>';
                        html += '<a href="<?= base_url('admin/artikel/edit/') ?>' + row.id + '" class="btn btn-primary">Edit</a> ';
                        html += '<a href="#" class="btn btn-danger btn-delete" data-id="' + row.id + '">Hapus</a>';
                        html += '</td></tr>';
                    });
                    $('#artikelTable tbody').html(html);
                }
            });
        }

        loadData();

        $(document).on('click', '.btn-delete', function (e) {
            e.preventDefault();
            const id = $(this).data('id');
            if (confirm('Yakin ingin menghapus artikel ini?')) {
                $.ajax({
                    url: "<?= base_url('ajax/delete/') ?>" + id,
                    method: "DELETE",
                    success: function () {
                        loadData();
                    },
                    error: function () {
                        alert('Gagal menghapus artikel.');
                    }
                });
            }
        });
    });
</script>

<?= $this->include('template/admin_footer'); ?>
```
# 4. Tambah Route pada app/Config/Routes.php
```
$routes->get('ajax', 'AjaxController::index');
$routes->get('ajax/getData', 'AjaxController::getData');
$routes->delete('ajax/delete/(:num)', 'AjaxController::delete/$1');
```
# TUGAS PRAKTIKUM 8
# 1. Ubah app/Views/ajax/index.php, tambah form baru  di atas <table> sebelum <table class="table" id="artikelTable">.
```
   // Form Tambah Artikel
   <div class="form-container">
       <h3 class="form-title-inside">Tambah Artikel</h3>
       <form id="form-tambah">
           <div class="form-group">
               <input type="text" name="judul" placeholder="Judul Artikel" required>
           </div>
           <div class="form-group">
               <textarea name="isi" placeholder="Isi Artikel" required></textarea>
           </div>
           <div class="form-group">
               <select name="id_kategori" required>
                   <option value="">-- Pilih Kategori --</option>
                   <option value="1">Tips dan Trik</option>
                   <option value="2">Resep Masakan</option>
               </select>
           </div>
           <button type="submit" class="btn-primary">Tambah</button>
       </form>
   </div>
   
   // Tabel Artikel
   <table class="table" id="artikelTable">
       <thead>
           <tr>
               <th>ID</th>
               <th>Judul</th>
               <th>Kategori</th>
               <th>Aksi</th>
           </tr>
       </thead>
       <tbody></tbody>
   </table>
```
# 2.  Tambah Script AJAX POST di bawah loadData()
```
         public function tambah()
         {
             $artikel = new \App\Models\ArtikelModel();
             $slug = url_title($this->request->getPost('judul'), '-', true);
             
             $artikel->insert([
                 'judul'       => $this->request->getPost('judul'),
                 'isi'         => $this->request->getPost('isi'),
                 'slug'        => $slug,
                 'id_kategori' => $this->request->getPost('id_kategori')
             ]);
         
             return $this->response->setJSON(['status' => 'OK']);
         }
```
# 3.  Tambah Function tambah() di AjaxController.php
```
   public function tambah()
   {
       $artikel = new \App\Models\ArtikelModel();
       $slug = url_title($this->request->getPost('judul'), '-', true);
       
       $artikel->insert([
           'judul'       => $this->request->getPost('judul'),
           'isi'         => $this->request->getPost('isi'),
           'slug'        => $slug,
           'id_kategori' => $this->request->getPost('id_kategori')
       ]);
   
       return $this->response->setJSON(['status' => 'OK']);
   }
```
# 4. Tambah Route di app/Config/Routes.php
```
   $routes->post('ajax/tambah', 'AjaxController::tambah');
```

# edit artikel di ajax
# 1 menambahkan  Input Hidden & Tombol Simpan ke Form pada app/Views/ajax/index.php
```
   <form id="form-artikel">
       <input type="hidden" name="id" id="artikel_id">
       
       <div class="form-group">
           <input type="text" name="judul" id="judul" placeholder="Judul Artikel" required>
       </div>
   
       <div class="form-group">
           <textarea name="isi" id="isi" placeholder="Isi Artikel" required></textarea>
       </div>
   
       <div class="form-group">
           <select name="id_kategori" id="id_kategori" required>
               <option value="">-- Pilih Kategori --</option>
               <option value="1">Umum</option>
               <option value="2">Teknologi</option>
           </select>
       </div>
   
       <button type="submit" class="btn-primary" id="submitBtn">Tambah</button>
   </form>
```
# 2.  Update JavaScript pada  ajax/index.php
```
   // Menambahkan artikel atau update jika id tersedia
   $('#form-artikel').on('submit', function (e) {
       e.preventDefault();
       const id = $('#artikel_id').val();
       const url = id ? "<?= base_url('ajax/update') ?>" : "<?= base_url('ajax/tambah') ?>";
       $.ajax({
           url: url,
           method: "POST",
           data: $(this).serialize(),
           success: function (res) {
               if (res.status === 'OK') {
                   $('#form-artikel')[0].reset();
                   $('#artikel_id').val('');
                   $('#submitBtn').text('Tambah');
                   loadData();
               } else {
                   alert('Gagal menyimpan data');
               }
           }
       });
   });
   
   // Handle tombol Edit
   $(document).on('click', '.btn-edit', function () {
       const id = $(this).data('id');
       $.get("<?= base_url('ajax/getArtikel/') ?>" + id, function (data) {
           $('#artikel_id').val(data.id);
           $('#judul').val(data.judul);
           $('#isi').val(data.isi);
           $('#id_kategori').val(data.id_kategori);
           $('#submitBtn').text('Update');
       });
   });
```
# 3.  Update Tabel HTML di fungsi loadData() ajax/index.php
```
   html += '<a href="#" class="btn btn-primary btn-edit" data-id="' + row.id + '">Edit</a>';
```
# Full codenya  ajax/index.php
```
<?= $this->include('template/admin_header'); ?>

<h2 class="sub-judul">Daftar Artikel (AJAX)</h2>
<hr>

<!--  Form Tambah/Edit Artikel -->
<div class="form-container">
    <h3 class="form-title-inside" id="formTitle">Tambah Artikel</h3>

    <form id="form-artikel">
        <input type="hidden" name="id" id="artikel_id">

        <div class="form-group">
            <label for="judul">Judul Artikel</label>
            <input type="text" name="judul" id="judul" required>
        </div>

        <div class="form-group">
            <label for="isi">Isi Artikel</label>
            <textarea name="isi" id="isi" rows="5" required></textarea>
        </div>

        <div class="form-group">
            <label for="id_kategori">Kategori</label>
            <select name="id_kategori" id="id_kategori" required>
                <option value="">-- Pilih Kategori --</option>
                <option value="1">Umum</option>
                <option value="2">Teknologi</option>
            </select>
        </div>

        <button type="submit" class="btn-primary" id="submitBtn">Tambah</button>
    </form>
</div>

<br>

<!--  Tabel Artikel -->
<table class="table" id="artikelTable">
    <thead>
        <tr>
            <th>ID</th>
            <th>Judul</th>
            <th>Kategori</th>
            <th>Aksi</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<!--  jQuery -->
<script src="<?= base_url('assets/js/jquery-3.6.0.min.js') ?>"></script>
<script>
    $(document).ready(function () {
        function loadData() {
            $('#artikelTable tbody').html('<tr><td colspan="4">Loading...</td></tr>');
            $.ajax({
                url: "<?= base_url('ajax/getData') ?>",
                method: "GET",
                dataType: "json",
                success: function (data) {
                    let html = '';
                    data.forEach(function (row) {
                        html += '<tr>';
                        html += '<td>' + row.id + '</td>';
                        html += '<td>' + row.judul + '</td>';
                        html += '<td>' + (row.nama_kategori ?? '-') + '</td>';
                        html += '<td>';
                        html += '<a href="#" class="btn btn-primary btn-edit" data-id="' + row.id + '">Edit</a> ';
                        html += '<a href="#" class="btn btn-danger btn-delete" data-id="' + row.id + '">Hapus</a>';
                        html += '</td></tr>';
                    });
                    $('#artikelTable tbody').html(html);
                }
            });
        }

        loadData();

        //  Tambah/Update
        $('#form-artikel').on('submit', function (e) {
            e.preventDefault();
            const id = $('#artikel_id').val();
            const url = id ? "<?= base_url('ajax/update') ?>" : "<?= base_url('ajax/tambah') ?>";
            $.ajax({
                url: url,
                method: "POST",
                data: $(this).serialize(),
                dataType: 'json',
                success: function (res) {
                    if (res.status === 'OK') {
                        $('#form-artikel')[0].reset();
                        $('#artikel_id').val('');
                        $('#submitBtn').text('Tambah');
                        $('#formTitle').text('Tambah Artikel');
                        loadData();
                    } else {
                        alert('Gagal menyimpan data');
                    }
                }
            });
        });

        //  Edit
        $(document).on('click', '.btn-edit', function () {
            const id = $(this).data('id');
            $.get("<?= base_url('ajax/getArtikel/') ?>" + id, function (data) {
                $('#artikel_id').val(data.id);
                $('#judul').val(data.judul);
                $('#isi').val(data.isi);
                $('#id_kategori').val(data.id_kategori);
                $('#submitBtn').text('Update');
                $('#formTitle').text('Edit Artikel');
            });
        });

        //  Hapus
        $(document).on('click', '.btn-delete', function (e) {
            e.preventDefault();
            const id = $(this).data('id');
            if (confirm('Yakin ingin menghapus artikel ini?')) {
                $.ajax({
                    url: "<?= base_url('ajax/delete/') ?>" + id,
                    method: "DELETE",
                    success: function () {
                        loadData();
                    }
                });
            }
        });
    });
</script>

<?= $this->include('template/admin_footer'); ?>
```
# Menambah route baru di routes.php
```
   $routes->get('ajax/getArtikel/(:num)', 'AjaxController::getArtikel/$1');
   $routes->post('ajax/update', 'AjaxController::update');
```
# Tambah method di controller ajax pada  AjaxController.php 
```
   public function getArtikel($id)
   {
       $model = new \App\Models\ArtikelModel();
       $data = $model->find($id);
       return $this->response->setJSON($data);
   }
   
   public function update()
   {
       $model = new \App\Models\ArtikelModel();
       $id = $this->request->getPost('id');
   
       $model->update($id, [
           'judul'       => $this->request->getPost('judul'),
           'isi'         => $this->request->getPost('isi'),
           'id_kategori' => $this->request->getPost('id_kategori')
       ]);
   
       return $this->response->setJSON(['status' => 'OK']);
   }
```
# Akses pada http://localhost:8080/ajax
# Hasil
![image](https://github.com/user-attachments/assets/8d57c93f-babf-416e-bfa5-90bc0d3e4bba)

# Tambah artikel
![image](https://github.com/user-attachments/assets/18143cbd-92f3-4a79-93a0-6efc999dea3f)

# PRAKTIKUM 9
1. Modifikasi Controller Artikel Ubah method `admin_index()` di `Artikel.php` untuk mengembalikan data dalam format JSON jika request adalah AJAX.
```
public function admin_index()
{
    $title = 'Daftar Artikel (Admin)';
    $model = new \App\Models\ArtikelModel();

    $q = $this->request->getVar('q') ?? '';
    $kategori_id = $this->request->getVar('kategori_id') ?? '';
    $page = $this->request->getVar('page') ?? 1;

    $builder = $model->table('artikel')
        ->select('artikel.*, kategori.nama_kategori')
        ->join('kategori', 'kategori.id_kategori = artikel.id_kategori');

    if ($q != '') {
        $builder->like('artikel.judul', $q);
    }

    if ($kategori_id != '') {
        $builder->where('artikel.id_kategori', $kategori_id);
    }

    $artikel = $builder->paginate(10, 'default', $page);
    $pager = $model->pager;

    $data = [
        'title' => $title,
        'q' => $q,
        'kategori_id' => $kategori_id,
        'artikel' => $artikel,
        'pager' => $pager
    ];

    if ($this->request->isAJAX()) {
        return $this->response->setJSON($data);
    } else {
        $kategoriModel = new \App\Models\KategoriModel();
        $data['kategori'] = $kategoriModel->findAll();
        return view('artikel/admin_index', $data);
    }
}
```
# 2. Modifikasi View (admin_index.php) 
```
* Ubah view `admin_index.php` untuk menggunakan jQuery. 
* Hapus kode yang menampilkan tabel artikel dan pagination secara langsung. 
* Tambahkan elemen untuk menampilkan data artikel dan pagination dari AJAX. 
* Tambahkan kode jQuery untuk melakukan request AJAX
```
# Kode
```
<?= $this->include('template/admin_header'); ?>

<h2><?= $title; ?></h2>

<!-- Toolbar Pencarian dan Tambah -->
<div class="container">
  <div class="toolbar" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <form id="search-form" style="display: flex; gap: 10px;">
      <input type="text" name="q" id="search-box" class="form-control" placeholder="Cari judul artikel" />

      <select name="kategori_id" id="category-filter" class="form-control">
        <option value="">Semua Kategori</option>
        <?php foreach ($kategori as $k): ?>
          <option value="<?= $k['id_kategori']; ?>" <?= ($kategori_id == $k['id_kategori']) ? 'selected' : ''; ?>>
            <?= $k['nama_kategori']; ?>
          </option>
        <?php endforeach; ?>
      </select>

      <button type="submit" class="btn btn-primary">Cari</button>
    </form>

    <a href="<?= base_url('admin/artikel/add') ?>" class="btn btn-primary">+ Artikel (AJAX)</a>
  </div>
</div>

<!-- Loader -->
<div id="loading" style="display: none; text-align: center; margin-top: 20px;">
  <div class="spinner"></div>
  <p>Mencari artikel...</p>
</div>

<!-- Tabel Artikel akan dirender di sini -->
<div id="article-container"></div>

<!-- Pagination akan dirender di sini -->
<div id="pagination-container" class="pagination-container" style="margin-top: 20px;"></div>

<!-- jQuery -->
<script src="<?= base_url('assets/js/jquery-3.6.0.min.js'); ?>"></script>
<script>
  $(document).ready(function () {
    const articleContainer = $('#article-container');
    const paginationContainer = $('#pagination-container');
    const searchForm = $('#search-form');
    const searchBox = $('#search-box');
    const categoryFilter = $('#category-filter');
    const loading = $('#loading');

    const fetchData = (url, showLoading = false) => {
      if (showLoading) loading.show();

      $.ajax({
        url: url,
        type: 'GET',
        dataType: 'json',
        headers: { 'X-Requested-With': 'XMLHttpRequest' },
        success: function (data) {
          renderArticles(data.artikel);
          renderPagination(data.pager, data.q, data.kategori_id);
          if (showLoading) setTimeout(() => loading.hide(), 800);
        },
        error: function () {
          articleContainer.html('<p style="color:red;">Gagal mengambil data.</p>');
          loading.hide();
        }
      });
    };

    const renderArticles = (articles) => {
      let html = '<table class="table">';
      html += '<thead><tr><th>ID</th><th>Judul</th><th>Kategori</th><th>Status</th><th>Aksi</th></tr></thead><tbody>';
      if (articles.length > 0) {
        articles.forEach(article => {
          html += `
            <tr>
              <td>${article.id}</td>
              <td>
                <strong>${article.judul}</strong><br>
                <small>${article.isi.substring(0, 50)}...</small>
              </td>
              <td>${article.nama_kategori}</td>
              <td>${article.status}</td>
              <td>
                <a class="btn btn-sm btn-info" href="/admin/artikel/edit/${article.id}">Ubah</a>
                <a class="btn btn-sm btn-danger" onclick="return confirm('Yakin menghapus data?');" href="/admin/artikel/delete/${article.id}">Hapus</a>
              </td>
            </tr>
          `;
        });
      } else {
        html += '<tr><td colspan="5">Tidak ada data.</td></tr>';
      }
      html += '</tbody></table>';
      articleContainer.html(html);
    };

    const renderPagination = (pager, q, kategori_id) => {
      if (!pager || !pager.links) return;
      let html = '<nav><ul class="pagination">';
      pager.links.forEach(link => {
        const url = link.url ? `${link.url}&q=${q}&kategori_id=${kategori_id}` : '#';
        html += `<li class="page-item ${link.active ? 'active' : ''}">
                    <a class="page-link pagination-link" href="${url}">${link.title}</a>
                 </li>`;
      });
      html += '</ul></nav>';
      paginationContainer.html(html);
    };

    // Saat form cari dikirim
    searchForm.on('submit', function (e) {
      e.preventDefault();
      const q = searchBox.val();
      const kategori_id = categoryFilter.val();
      fetchData(`/admin/artikel?q=${q}&kategori_id=${kategori_id}`, true);
    });

    // Saat ganti kategori
    categoryFilter.on('change', function () {
      searchForm.trigger('submit');
    });

    // Handler pagination diklik
    $(document).on('click', '.pagination-link', function (e) {
      e.preventDefault();
      const href = $(this).attr('href');
      if (href && href !== '#') {
        fetchData(href, true);
      }
    });

    // Load awal
    fetchData('/admin/artikel', false);
  });
</script>

<?= $this->include('template/admin_footer'); ?>
```
# HASIL buka di: http://localhost:8080/index.php/admin/artikel
![image](https://github.com/user-attachments/assets/7e8dc2fc-78ff-4aad-8474-01bb087836fe)
# Pertanyaan dan Tugas 
```
1. Selesaikan semua langkah praktikum di atas.
jawab: sudah
2. Modifikasi tampilan data artikel dan pagination sesuai kebutuhan desain.
jawab: sudah 
3. Tambahkan indikator loading saat data sedang diambil dari server.
jawab: sudah ada di bagian ini
Sudah ada bagian ini:
html
Salin
Edit
<div id="loading" style="display: none; text-align: center; margin-top: 20px;">
  <div class="spinner"></div>
  <p>Mencari artikel...</p>
</div>
Tambah cssnya
.spinner {
    border: 5px solid #f3f3f3;
    border-top: 5px solid #007bff;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 0.8s linear infinite;
    margin: auto;
  }
4. Implementasikan fitur sorting (mengurutkan artikel berdasarkan judul, dll.) dengan AJAX.

```
# 3. indikator loading
![image](https://github.com/user-attachments/assets/ea985075-1f4d-40fa-aeef-bdb36c782d70)
# 4. sortir sesuai judul
![image](https://github.com/user-attachments/assets/2ddc5302-9cb7-408a-904a-d7bd5afcec23)
# sortir sesuai kategori
![image](https://github.com/user-attachments/assets/ed340279-dd2a-44b2-8110-11109f174270)

# PRAKTIKUM 10
```
Persiapan 
Periapan awal adalah mengunduh aplikasi REST Client, ada banyak aplikasi yang dapat digunakan untuk 
keperluan tersebut. Salah satunya adalah Postman. Postman – Merupakan aplikasi yang berfungsi 
sebagai REST Client, digunakan untuk testing REST API. Unduh apliasi Postman dari tautan berikut: 
https://www.postman.com/downloads/ 
```
# Membuat Model. 
```
Pada modul sebelumnya sudah dibuat ArtikelModel, pada modul ini kita akan memanfaatkan model 
tersebut agar dapat diakses melalui API. 
```
# Membuat REST Controller 
Pada tahap ini, kita akan membuat file REST Controller yang berisi fungsi untuk menampilkan, 
menambah, mengubah dan menghapus data. Masuklah ke direktori app\Controllers dan buatlah file 
baru bernama Post.php. Kemudian, salin kode di bawah ini ke dalam file tersebut:
```
<?php

namespace App\Controllers;

use CodeIgniter\RESTful\ResourceController;
use CodeIgniter\API\ResponseTrait;
use App\Models\ArtikelModel;

class Post extends ResourceController
{
    use ResponseTrait;

    // Menampilkan semua data artikel
    public function index()
    {
        $model = new ArtikelModel();
        $data['artikel'] = $model->orderBy('id', 'DESC')->findAll();
        return $this->respond($data);
    }

    // Menambahkan data baru
    public function create()
    {
        $model = new ArtikelModel();
        $data = [
            'judul' => $this->request->getVar('judul'),
            'isi'   => $this->request->getVar('isi')
        ];
        $model->insert($data);

        return $this->respondCreated([
            'status' => 201,
            'messages' => ['success' => 'Data artikel berhasil ditambahkan.']
        ]);
    }

    // Menampilkan 1 data
    public function show($id = null)
    {
        $model = new ArtikelModel();
        $data = $model->where('id', $id)->first();
        return $data
            ? $this->respond($data)
            : $this->failNotFound('Data tidak ditemukan.');
    }

    // Mengupdate data
    public function update($id = null)
    {
        $model = new ArtikelModel();
        $data = [
            'judul' => $this->request->getVar('judul'),
            'isi'   => $this->request->getVar('isi')
        ];
        $model->update($id, $data);

        return $this->respond([
            'status' => 200,
            'messages' => ['success' => 'Data artikel berhasil diubah.']
        ]);
    }

    // Menghapus data
    public function delete($id = null)
    {
        $model = new ArtikelModel();
        $data = $model->where('id', $id)->first();

        if (!$data) return $this->failNotFound('Data tidak ditemukan.');

        $model->delete($id);

        return $this->respondDeleted([
            'status' => 200,
            'messages' => ['success' => 'Data artikel berhasil dihapus.']
        ]);
    }
}
```
# Routing REST API masuklah ke direktori app/Config dan bukalah file Routes.php. Tambahkan kode
```
$routes->resource('post');
```
# Jalankan php spark routes
![image](https://github.com/user-attachments/assets/055865ee-ed30-4f36-90e4-ae3423fd0342)
# Testing REST API CodeIgniter 
Buka aplikasi postman dan pilih create new → HTTP Request 
![image](https://github.com/user-attachments/assets/1941373d-b86b-44cf-846e-df4db348d222)
# Menampilkan Semua Data 
```
Pilih method GET dan masukkan URL berikut: 
http://localhost:8080/post  
Lalu, klik Send. Jika hasil test menampilkan semua data artikel dari database, maka pengujian 
berhasil.
```
![image](https://github.com/user-attachments/assets/5ae52f56-a4a8-4712-9bc3-66bacd320514)
# Menampilkan Data Spesifik 
```
Masih menggunakan method GET, hanya perlu menambahkan ID artikel di belakang URL 
seperti ini: 
http://localhost:8080/post/2 
Selanjutnya, klik Send. Request tersebut akan menampilkan data artikel yang memiliki ID 
nomor 2 di database. 
```
![image](https://github.com/user-attachments/assets/6cb33865-d0d5-44f9-9d7b-f4da3ffb0faa)
# Mengubah Data  
```
Untuk mengubah data, silakan ganti method menjadi PUT. Kemudian, masukkan URL artikel 
yang ingin diubah. Misalnya, ingin mengubah data artikel dengan ID nomor 2, maka masukkan 
URL berikut: 
http://localhost:8080/post/2  
Selanjutnya, pilih tab Body. Kemudian, pilih x-www-form-uriencoded. Masukkan nama 
atribut tabel pada kolom KEY dan nilai data yang baru pada kolom VALUE. Kalau sudah, 
klik Send.
```
![image](https://github.com/user-attachments/assets/eb0a6b55-ca4b-4fce-810b-6dba7a46fcd7)
![image](https://github.com/user-attachments/assets/b37a2349-f409-4756-b2ff-cf0e7de4edd8)
# Menambahkan Data 
```
Anda perlu menggunakan method POST untuk menambahkan data baru ke database. 
Kemudian, masukkan URL berikut: 
http://localhost:8080/post 
Pilih tab Body, lalu pilih x-www-form-uriencoded. Masukkan atribut tabel pada kolom KEY 
dan nilai data baru di kolom VALUE. Jangan lupa, klik Send.
```
![image](https://github.com/user-attachments/assets/f4a6ae81-1619-42f8-b69d-1a8458f522ec)
# Menghapus Data 
```
Pilih method DELETE untuk menghapus data. Lalu, masukkan URL spesifik data mana yang 
ingin di hapus. Misalnya, ingin menghapus data nomor 4, maka URL-nya seperti ini: 
http://localhost:8080/post/7 
Langsung saja klik Send, maka akan mendapatkan pesan bahwa data telah berhasil dihapus dari 
database.
```
![image](https://github.com/user-attachments/assets/4cdafcbd-6d8e-4ecd-9c61-dba3b468d413)

# PRAKTIKUM 11
```
Langkah-langkah Praktikum 
Persiapan 
Untuk memulai penggunaan framework Vuejs, dapat dialkukan dengan menggunakan npm, 
atau bisa juga dengan cara manual. Untuk praktikum kali ini kita akan gunakan cara manual. 
Yang diperlukan adalah library Vuejs, Axios untuk melakukan call API REST. Menggunakan 
CDN.
```
# Library VueJS 
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script> 
# Library Axios 
<script src="https://unpkg.com/axios/dist/axios.min.js"></script> 
# Struktur Direktory 
Buat Project baru dengan struktur file dan directory seperti berikut: 
``` 
│   index.html 
└───assets 
    ├───css 
    │       style.css 
    └───js 
            app.js 
```
# Menampilkan data File index.html 
```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daftar Artikel</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <div id="app">
    <!-- Toolbar Header dan Tombol Tambah -->
<div class="header-bar" style="display: flex; align-items: center; margin-bottom: 20px; gap: 20px;">
  <h1 style="margin: 0;">Daftar Artikel</h1>

</div>

    <!-- Modal Form -->
    <div class="modal" v-if="showForm">
      <div class="modal-content">
        <span class="close" @click="showForm = false">&times;</span>
        <form id="form-data" @submit.prevent="saveData">
          <h3 id="form-title">{{ formTitle }}</h3>
          <div><input type="text" v-model="formData.judul" placeholder="Judul" required /></div>
          <div><textarea v-model="formData.isi" placeholder="Isi Artikel" rows="8"></textarea></div>
          <div>

            <select v-model="formData.status">
            <option value="0">Draft</option>
            <option value="1">Publish</option>
            </select>


          <input type="hidden" v-model="formData.id" />
          <button type="submit" id="btnSimpan">Simpan</button>
          <button type="button" @click="showForm = false">Batal</button>
        </form>
      </div>
    </div>
  </div>

  <script src="assets/js/app.js"></script>
</body>
</html>
```
# File apps.js
```
const { createApp } = Vue;

// tentukan lokasi API REST End Point
const apiUrl = "http://localhost:8080/Framework/public";

createApp({
  data() {
    return {
      artikel: [],
    };
  },
  mounted() {
    this.loadData();
  },
  methods: {
    loadData() {
      axios
        .get(apiUrl + "/post")
        .then((response) => {
          this.artikel = response.data.artikel;
        })
        .catch((error) => console.log(error));
    },
    statusText(status) {
      if (!status) return "";
      return status == 1 ? "Publish" : "Draft";
    },
  },
}).mount("#app");
```
# hasil
![image](https://github.com/user-attachments/assets/c6bc781d-4c84-401b-97a9-94bffbcbc7ba)
# Form Tambah dan Ubah Data Pada file index,html sispkan kode berikut sebelum table data. 
```
<button id="btn-tambah" @click="tambah">Tambah Data</button>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Judul</th>
      <th>Status</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="(row, index) in artikel" :key="row.id">
      <td class="center-text">{{ row.id }}</td>
      <td>{{ row.judul }}</td>
      <td class="center-text">{{ statusText(row.status) }}</td>
      <td class="center-text">
        <a href="#" @click.prevent="edit(row)">Edit</a>
        <a href="#" @click.prevent="hapus(index, row.id)">Hapus</a>
      </td>
    </tr>
  </tbody>
</table>
```
# File app.jsnya lengkapi
```
const { createApp } = Vue;
const apiUrl = "http://localhost:8080/Framework/public"; 

createApp({
  data() {
    return {
      artikel: [],
      formData: {
        id: null,
        judul: '',
        isi: '',
        status: '0'
      },
      showForm: false,
      formTitle: 'Tambah Artikel',
    };
  },
  mounted() {
    this.loadData();
  },
  methods: {
    loadData() {
      axios.get(apiUrl + "/post")
        .then(response => {
          this.artikel = response.data.artikel;
        })
        .catch(error => console.log(error));
    },
    statusText(status) {
      return status == 1 ? "Publish" : "Draft";
    },
    tambah() {
      this.formData = { id: null, judul: '', isi: '', status: '0' };
      this.formTitle = "Tambah Artikel";
      this.showForm = true;
    },
    edit(item) {
      this.formData = { ...item };
      this.formTitle = "Ubah Artikel";
      this.showForm = true;
    },
    hapus(id) {
      if (confirm("Yakin ingin menghapus artikel ini?")) {
        axios.delete(apiUrl + "/post/" + id)
          .then(() => this.loadData())
          .catch(error => console.log(error));
      }
    },
    saveData() {
      if (this.formData.id) {
        // Update
        axios.put(apiUrl + "/post/" + this.formData.id, this.formData)
          .then(() => this.loadData())
          .catch(error => console.log(error));
      } else {
        // Tambah
        axios.post(apiUrl + "/post", this.formData)
          .then(() => this.loadData())
          .catch(error => console.log(error));
      }

      // Reset form
      this.formData = { id: null, judul: '', isi: '', status: '0' };
      this.showForm = false;
    }
  }
}).mount('#app');
```
# File cssnya
```
#app {
  margin: 0 auto;
  width: 900px;
  font-family: Arial, sans-serif;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

#btn-tambah {
  margin-bottom: 20px;
  padding: 10px 20px;
  cursor: pointer;
  background-color: #3152d6;
  color: #fff;
  border: none;
  border-radius: 4px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 30px;
}

th {
  padding: 12px;
  background-color: #5778ff;
  color: white;
  text-align: center;
}

td {
  padding: 10px;
  text-align: left;
}

.center-text {
  text-align: center;
}

tr:nth-child(even) {
  background-color: #f4f7ff;
}

td a {
  margin: 0 8px;
  text-decoration: none;
  color: #3152d6;
  font-weight: bold;
}

td a:hover {
  text-decoration: underline;
}

.modal {
  display: block;
  position: fixed;
  z-index: 2;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.4);
}

.modal-content {
  background-color: #fff;
  margin: 5% auto;
  padding: 20px;
  width: 600px;
  border-radius: 6px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
  position: relative;
}

.close {
  position: absolute;
  right: 16px;
  top: 10px;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}

#form-data input,
#form-data textarea,
#form-data select {
  width: 100%;
  margin-bottom: 12px;
  padding: 10px;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 4px;
}

#form-data button {
  padding: 10px 20px;
  margin-top: 10px;
  margin-right: 10px;
  cursor: pointer;
}

#btnSimpan {
  background-color: #3152d6;
  color: #fff;
  border: none;
}

.header-bar {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 20px;
}

.header-bar h1 {
  margin: 0;
}
```
# Hasilnya
![image](https://github.com/user-attachments/assets/1c5ec4c5-2826-44a6-9486-57097fe93698)


>>>>>>> 20af11503a1ab04fb8e0d51fdc45f266b397dcea
